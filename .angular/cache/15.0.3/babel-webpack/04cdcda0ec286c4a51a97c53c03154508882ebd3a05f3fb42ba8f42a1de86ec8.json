{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component, Input, Output, EventEmitter } from '@angular/core';\nlet ProductComponent = class ProductComponent {\n  constructor() {\n    this.hoveredEvent = new EventEmitter();\n  }\n  ngOnInit() {}\n  hovered(name, flag) {\n    this.hoveredEvent.emit(\"{name: name, flag: flag}\");\n  }\n  addToCart(product) {\n    let cart = [];\n    cart = JSON.parse(localStorage.getItem('cart') || `[]`);\n    console.log(cart);\n    let item = cart.find(item => item.id === product.id);\n    if (item) {\n      item.name = product.name;\n      item.quantity += 1;\n      item.price = product.price;\n    } else {\n      cart.push({\n        id: product.id,\n        name: product.name,\n        quantity: 1,\n        price: product.price\n      });\n    }\n    console.table(cart);\n    localStorage.setItem('cart', JSON.stringify(cart));\n  }\n  removeFromCart(product) {\n    let cart = [];\n    cart = JSON.parse(localStorage.getItem('cart') || `[]`);\n    let item = cart.find(item => item.id === product.id);\n    if (item) {\n      item.quantity -= 1;\n      if (item.quantity <= 0) {\n        cart = cart.filter(item => item.id !== product.id);\n      }\n    }\n    console.table(cart);\n    localStorage.setItem('cart', JSON.stringify(cart));\n  }\n};\n__decorate([Input()], ProductComponent.prototype, \"product\", void 0);\n__decorate([Output()], ProductComponent.prototype, \"hoveredEvent\", void 0);\nProductComponent = __decorate([Component({\n  selector: 'app-product',\n  templateUrl: './product.component.html',\n  styleUrls: ['./product.component.css']\n})], ProductComponent);\nexport { ProductComponent };","map":{"version":3,"mappings":";AAAA,SAASA,SAAS,EAAEC,KAAK,EAAEC,MAAM,EAAEC,YAAY,QAAQ,eAAe;AAQ/D,IAAMC,gBAAgB,GAAtB,MAAMA,gBAAgB;EAO3BC;IAFU,iBAAY,GAAG,IAAIF,YAAY,EAAU;EAEnC;EAEhBG,QAAQ,IACR;EAEAC,OAAO,CAACC,IAAY,EAAEC,IAAa;IACjC,IAAI,CAACC,YAAY,CAACC,IAAI,CAAC,0BAA0B,CAAC;EACpD;EAEAC,SAAS,CAACC,OAAgB;IACxB,IAAIC,IAAI,GAAG,EAAE;IAEbA,IAAI,GAAGC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,IAAI,IAAI,CAAC;IAEvDC,OAAO,CAACC,GAAG,CAACN,IAAI,CAAC;IAEjB,IAAIO,IAAI,GAAGP,IAAI,CAACQ,IAAI,CAAED,IAAS,IAAKA,IAAI,CAACE,EAAE,KAAKV,OAAO,CAACU,EAAE,CAAC;IAC3D,IAAIF,IAAI,EAAE;MACRA,IAAI,CAACb,IAAI,GAAGK,OAAO,CAACL,IAAI;MACxBa,IAAI,CAACG,QAAQ,IAAI,CAAC;MAClBH,IAAI,CAACI,KAAK,GAAGZ,OAAO,CAACY,KAAK;KAC3B,MAAM;MACLX,IAAI,CAACY,IAAI,CAAC;QACRH,EAAE,EAAEV,OAAO,CAACU,EAAE;QACdf,IAAI,EAAEK,OAAO,CAACL,IAAI;QAClBgB,QAAQ,EAAE,CAAC;QACXC,KAAK,EAAEZ,OAAO,CAACY;OAChB,CAAC;;IAGJN,OAAO,CAACQ,KAAK,CAACb,IAAI,CAAC;IAEnBG,YAAY,CAACW,OAAO,CAAC,MAAM,EAAEb,IAAI,CAACc,SAAS,CAACf,IAAI,CAAC,CAAC;EACpD;EAEAgB,cAAc,CAACjB,OAAgB;IAC7B,IAAIC,IAAI,GAAG,EAAE;IACbA,IAAI,GAAGC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,IAAI,IAAI,CAAC;IAEvD,IAAIG,IAAI,GAAGP,IAAI,CAACQ,IAAI,CAAED,IAAS,IAAKA,IAAI,CAACE,EAAE,KAAKV,OAAO,CAACU,EAAE,CAAC;IAC3D,IAAIF,IAAI,EAAE;MACRA,IAAI,CAACG,QAAQ,IAAI,CAAC;MAClB,IAAIH,IAAI,CAACG,QAAQ,IAAI,CAAC,EAAE;QACtBV,IAAI,GAAGA,IAAI,CAACiB,MAAM,CAAEV,IAAS,IAAKA,IAAI,CAACE,EAAE,KAAKV,OAAO,CAACU,EAAE,CAAC;;;IAI7DJ,OAAO,CAACQ,KAAK,CAACb,IAAI,CAAC;IAEnBG,YAAY,CAACW,OAAO,CAAC,MAAM,EAAEb,IAAI,CAACc,SAAS,CAACf,IAAI,CAAC,CAAC;EACpD;CACD;AAvDCkB,YADC/B,KAAK,EAAE,iDACU;AAER+B,YAAT9B,MAAM,EAAE,sDAA2C;AALzCE,gBAAgB,eAL5BJ,SAAS,CAAC;EACTiC,QAAQ,EAAE,aAAa;EACvBC,WAAW,EAAE,0BAA0B;EACvCC,SAAS,EAAE,CAAC,yBAAyB;CACtC,CAAC,GACW/B,gBAAgB,CA0D5B;SA1DYA,gBAAgB","names":["Component","Input","Output","EventEmitter","ProductComponent","constructor","ngOnInit","hovered","name","flag","hoveredEvent","emit","addToCart","product","cart","JSON","parse","localStorage","getItem","console","log","item","find","id","quantity","price","push","table","setItem","stringify","removeFromCart","filter","__decorate","selector","templateUrl","styleUrls"],"sourceRoot":"","sources":["/Users/adrian-paulcarrieres/Documents/Efrei/Angular/my-shop/src/app/product/product.component.ts"],"sourcesContent":["import { Component, Input, Output, EventEmitter } from '@angular/core';\nimport { Product } from '../models/product';\n\n@Component({\n  selector: 'app-product',\n  templateUrl: './product.component.html',\n  styleUrls: ['./product.component.css']\n})\nexport class ProductComponent {\n\n  @Input()\n  product!: Product;\n\n  @Output() hoveredEvent = new EventEmitter<string>();\n\n  constructor() { }\n\n  ngOnInit(): void {\n  }\n\n  hovered(name: string, flag: boolean) {\n    this.hoveredEvent.emit(\"{name: name, flag: flag}\");\n  }\n\n  addToCart(product: Product) {\n    let cart = [];\n\n    cart = JSON.parse(localStorage.getItem('cart') || `[]`);\n\n    console.log(cart);\n\n    let item = cart.find((item: any) => item.id === product.id);\n    if (item) {\n      item.name = product.name;\n      item.quantity += 1;\n      item.price = product.price;\n    } else {\n      cart.push({\n        id: product.id,\n        name: product.name,\n        quantity: 1,\n        price: product.price,\n      });\n    }\n\n    console.table(cart);\n\n    localStorage.setItem('cart', JSON.stringify(cart));\n  }\n\n  removeFromCart(product: Product) {\n    let cart = [];\n    cart = JSON.parse(localStorage.getItem('cart') || `[]`);\n\n    let item = cart.find((item: any) => item.id === product.id);\n    if (item) {\n      item.quantity -= 1;\n      if (item.quantity <= 0) {\n        cart = cart.filter((item: any) => item.id !== product.id);\n      }\n    }\n\n    console.table(cart);\n\n    localStorage.setItem('cart', JSON.stringify(cart));\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}